!!!
%html
  %head
    %title= "#{request.env['REQUEST_PATH'].nil? ? '' : request.env['REQUEST_PATH'].gsub('/', ' ').titlecase + ' | '} The Open Effects Association"
    = favicon_link_tag "ofx_favicon.ico"
    = stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true
    = javascript_include_tag "application", "data-turbolinks-track" => true
    = csrf_meta_tags
    %meta{ :http_equiv => "X-UA-Compatible", :content => "IE=edge" }
    %meta{ :name => "viewport", :content => "width=device-width, initial-scale=1" }
    %script{ :src => "//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js" }
  %body{ :role => "document", 'data-spy' => 'scroll', 'data-target' => '.navbar-top', :class => "c_#{params[:controller]} a_#{params[:action]}"}
    .wrapper
      .navbar.navbar-inverse.navbar-fixed-top{ :role => "navigation" }
        .container
          .navbar-header
            %button{ :class => "navbar-toggle", :data_target => ".navbar-collapse", :data_toggle => "collapse", :type => "button" }
              %span.sr-only Toggle navigation
              %span.icon-bar
              %span.icon-bar
              %span.icon-bar
          .navbar-collapse.collapse
            .row
              .navbar-left
                .navbar-top
                  %ul.nav.navbar-nav
                    %li.nav-logo
                      = image_tag('OFX_small.png')
                    %li
                      = link_to 'Welcome', root_path
                    - if (params[:controller] == 'welcome')                          
                      %li
                        = link_to raw('Why a Standard? ' + content_tag(:span, nil, :class => "glyphicon glyphicon-circle-arrow-down")), '#standard'
                      %li
                        = link_to raw('For Implementers ' + content_tag(:span, nil, :class => "glyphicon glyphicon-circle-arrow-down")), '#implementers'
                      %li
                        = link_to raw('Organization ' + content_tag(:span, nil, :class => "glyphicon glyphicon-circle-arrow-down")), '#organization'
                    - if current_user and current_user.has_role? :admin
                      %li
                        = link_to 'Dashboard', admin_dashboard_path
                    %li
                      = link_to 'API Reference', reference_api_docs_path
              .navbar-right
                - if user_signed_in?
                  %p.navbar-text Member: #{current_user.name}
                  = form_tag(destroy_user_session_path, method: 'delete', role: "form", class: "navbar-form form-inline") do
                    %button{ :type => 'submit', :class => "btn btn-sm btn-primary" } Sign out
                
                - else
                  = form_tag(new_user_session_path, method: 'post', role: "form", class: "navbar-form form-inline") do
                    .form-group
                      = text_field_tag "user[email]", nil, :class => "form-control input-xs", :placeholder => 'Email'
                    .form-group
                      = password_field_tag "user[password]", nil, :class => "form-control input-xs", :placeholder => 'Password'
                    
                    %button{ :type => 'submit', :class => "btn btn-sm btn-primary" } Sign in
                 
      .container{ :role => "main" }    
        -if flash[:notice]
          .alert.alert-info
            = flash.notice
        -if flash[:alert]
          .alert.alert-danger
            = flash.alert
      = yield
      .push
      
    %footer
      .container
        Copyright  &copy;#{Time.now.year} The Open Effects Association 