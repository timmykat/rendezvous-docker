{"version":3,"file":"recaptcha.js","mappings":"AAAAA,OAAOC,gBAAkB,CAACC,EAAQC,KAChCC,QAAQC,IAAI,mBAAoBH,EAAQC,GAExC,MAAMG,EAAUC,SAASC,cAAc,QAAQC,QAAQH,QACjDI,EAAaH,SAASC,cAAc,IAAIN,0BAC9C,IAAKQ,EAEH,YADAN,QAAQO,MAAM,8BAA+BT,GAG/C,IAAKQ,EAEH,YADAN,QAAQO,MAAM,2BAIhB,MAAMC,EAAYL,SAASM,cAAc,SACzCD,EAAUE,KAAO,kBACjBF,EAAUG,KAAO,SACjBH,EAAUI,UAAUC,IAAI,aACxBL,EAAUM,MAAQ,GAClBR,EAAWS,WAAWC,aAAaR,EAAWF,GAE9C,MAAMW,EAAmBA,KACvBrB,OAAOsB,WAAWC,OAAM,KACtBnB,QAAQC,IAAI,2BACZiB,WAAWE,QAAQlB,EAAS,CAAEH,OAAQA,IACnCsB,MAAKC,IACJtB,QAAQC,IAAI,oBAAqBqB,GACjCd,EAAUM,MAAQQ,CAAK,GACvB,GACJ,EAGJ,GAAI1B,OAAOsB,WACTD,QACK,CACL,MAAMM,EAASpB,SAASM,cAAc,UACtCc,EAAOC,IAAM,kDAAkDC,mBAAmBvB,KAClFqB,EAAOG,OAAQ,EACfH,EAAOI,OAAQ,EACfJ,EAAOK,OAASX,EAChBd,SAAS0B,KAAKC,YAAYP,EAC5B","sources":["webpack://rendezvous-website/./app/javascript/packs/recaptcha.js"],"sourcesContent":["window.handleRecaptcha = (formId, action) => {\n  console.log('Recaptcha loaded', formId, action)\n\n  const siteKey = document.querySelector('body').dataset.siteKey\n  const formSubmit = document.querySelector(`#${formId} input[type=\"submit\"]`)\n  if (!formSubmit) {\n    console.error('Submit button not found for', formId);\n    return;\n  }\n  if (!formSubmit) {\n    console.error('Submit button not found')\n    return\n  }\n\n  const formInput = document.createElement('input')\n  formInput.name = 'recaptcha_token'\n  formInput.type = 'hidden'\n  formInput.classList.add('recaptcha')\n  formInput.value = ''\n  formSubmit.parentNode.insertBefore(formInput, formSubmit)\n\n  const processRecaptcha = () => {\n    window.grecaptcha.ready(() => {\n      console.log(\"Getting recaptcha token\")\n      grecaptcha.execute(siteKey, { action: action })\n        .then(token => {\n          console.log(\"Recaptcha token: \", token)\n          formInput.value = token\n        })\n    })\n  }\n\n  if (window.grecaptcha) {\n    processRecaptcha()\n  } else {\n    const script = document.createElement('script')\n    script.src = `https://www.google.com/recaptcha/api.js?render=${encodeURIComponent(siteKey)}`\n    script.async = true\n    script.defer = true\n    script.onload = processRecaptcha\n    document.head.appendChild(script)\n  }\n}\n"],"names":["window","handleRecaptcha","formId","action","console","log","siteKey","document","querySelector","dataset","formSubmit","error","formInput","createElement","name","type","classList","add","value","parentNode","insertBefore","processRecaptcha","grecaptcha","ready","execute","then","token","script","src","encodeURIComponent","async","defer","onload","head","appendChild"],"sourceRoot":""}